(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00b5eee7"],{3572:function(e,t,r){},"3d47":function(e,t,r){"use strict";var a=r("3572"),o=r.n(a);o.a},"5fc3":function(e,t,r){},"8da0":function(e,t,r){},"8fb4":function(e,t,r){"use strict";var a=r("9ee5"),o=r.n(a);o.a},"9ee5":function(e,t,r){},a684:function(e,t,r){"use strict";var a=r("d97a"),o=r.n(a);o.a},d97a:function(e,t,r){},e9b7:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user_block"},[r("div",{staticClass:"top_block"},[r("query-form")],1),r("div",{staticClass:"main_block"},[r("query-grid")],1),r("div",{staticClass:"dialog_block"},[r("create-form")],1),r("div",{staticClass:"dialog_block"},[r("update-form")],1)])},o=[],n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"create-dialog",attrs:{title:"新增",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"queryForm",attrs:{model:e.dataForm,"label-width":"150px",rules:e.rules}},[r("el-row",{attrs:{gutter:24}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"角色名称",prop:"rolename"}},[r("el-input",{model:{value:e.dataForm.rolename,callback:function(t){e.$set(e.dataForm,"rolename",t)},expression:"dataForm.rolename"}})],1)],1),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"角色描述",prop:"roledesc"}},[r("el-input",{model:{value:e.dataForm.roledesc,callback:function(t){e.$set(e.dataForm,"roledesc",t)},expression:"dataForm.roledesc"}})],1)],1)],1)],1),r("div",{staticClass:"button-block"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleCreate("orderForm")}}},[e._v("确认")]),r("el-button",{on:{click:function(t){return e.resetForm("orderForm")}}},[e._v("重置")])],1)],1)},s=[],l=(r("96cf"),r("1da1")),i=r("d8ad"),u={data:function(){return{dataForm:{roleid:"",rolename:"",roledesc:"",rolestate:""},dialogVisible:!1,rules:{rolename:[{required:!0,message:"请输入",trigger:"blur"}],roledesc:[{required:!0,message:"请输入",trigger:"blur"}]}}},methods:{handleCreate:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$loading({lock:!0,text:"loading",background:"rgba(0,0,0,.7)"}),t.next=3,e.$http.post("/role/createRole",e.dataForm).then((function(t){r.close(),"10001"===t.data.resposeCode?(e.$message({message:"创建角色成功",type:"success"}),e.dialogVisible=!1,e.resetForm(),e.refreshGrid()):e.$alert("创建角色失败，请联系工作人员，微信号：catAshera3","",{confirmButtonText:"确定"})}))["catch"]((function(e){r.close(),console.log(e,"err")}));case 3:a=t.sent,console.log(a,"res");case 5:case"end":return t.stop()}}),t)})))()},resetForm:function(){this.dataForm={userid:"",custname:"",phoneno:"",username:"",email:"",wechatno:"",password:"",roleid:""}},refreshGrid:function(){i["a"].$emit("query",!0)},isUseridRepeat:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/user/countUser",{userid:e.dataForm.userid});case 2:if(r=t.sent,!(r.data.data>0)){t.next=6;break}return console.log("res success",r),t.abrupt("return",!0);case 6:return console.log("res error",r),t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))()}},mounted:function(){var e=this;i["a"].$on("createDialogVisible",(function(t){e.dialogVisible=t}))}},c=u,d=(r("8fb4"),r("2877")),m=Object(d["a"])(c,n,s,!1,null,"570fac38",null),p=m.exports,f=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-dialog",{staticClass:"create-dialog",attrs:{title:"修改",visible:e.dialogVisible,width:"60%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[r("el-form",{ref:"queryForm",attrs:{model:e.dataForm,"label-width":"150px",rules:e.rules}},[r("el-row",{attrs:{gutter:24}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"角色ID",prop:"roleid"}},[r("el-input",{model:{value:e.dataForm.roleid,callback:function(t){e.$set(e.dataForm,"roleid",t)},expression:"dataForm.roleid"}})],1)],1),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"角色名称",prop:"rolename"}},[r("el-input",{model:{value:e.dataForm.rolename,callback:function(t){e.$set(e.dataForm,"rolename",t)},expression:"dataForm.rolename"}})],1)],1)],1),r("el-row",{attrs:{gutter:24}},[r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"角色描述",prop:"roledesc"}},[r("el-input",{model:{value:e.dataForm.roledesc,callback:function(t){e.$set(e.dataForm,"roledesc",t)},expression:"dataForm.roledesc"}})],1)],1),r("el-col",{attrs:{span:11}},[r("el-form-item",{attrs:{label:"角色状态",prop:"rolestate"}},[r("tf-select",{attrs:{option:"rolestate"},model:{value:e.dataForm.rolestate,callback:function(t){e.$set(e.dataForm,"rolestate",t)},expression:"dataForm.rolestate"}})],1)],1)],1)],1),r("div",{staticClass:"button-block"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleConfirm()}}},[e._v("确认")]),r("el-button",{on:{click:function(t){return e.cancel()}}},[e._v("取消")])],1)],1)},g=[],b=r("3642"),h={components:{TfSelect:b["a"]},data:function(){return{dataForm:{roleid:"",rolename:"",roledesc:"",rolestate:""},dialogVisible:!1,rules:{custname:[{required:!0,message:"请输入您的真实姓名",trigger:"blur"}],wechatno:[{required:!0,message:"请输入您的微信号",trigger:"blur"}],password:[{required:!0,message:"请输入您的密码",trigger:"blur"}],roleid:[{required:!0,message:"请选择该用户角色",trigger:"blur"}],email:[{required:!0,message:"请输入您的邮箱",trigger:"blur"}]}}},methods:{handleConfirm:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$loading({lock:!0,text:"loading",background:"rgba(0,0,0,.7)"}),t.next=3,e.$http.post("/user/updateUser",e.dataForm).then((function(t){r.close(),"10001"===t.data.resposeCode?(e.$message({message:"修改用户信息成功",type:"success"}),e.dialogVisible=!1,e.refreshGrid()):e.$alert("修改用户信息失败，请联系工作人员，微信号：catAshera3","",{confirmButtonText:"确定"})}))["catch"]((function(e){r.close(),console.log(e,"err")}));case 3:a=t.sent,console.log(a,"res");case 5:case"end":return t.stop()}}),t)})))()},cancel:function(){this.dialogVisible=!1},isUseridRepeat:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.post("/user/countUser",{userid:e.dataForm.userid});case 2:if(r=t.sent,!(r.data.data>0)){t.next=6;break}return console.log("res success",r),t.abrupt("return",!0);case 6:return console.log("res error",r),t.abrupt("return",!1);case 8:case"end":return t.stop()}}),t)})))()},refreshGrid:function(){i["a"].$emit("query",!0)}},mounted:function(){var e=this;i["a"].$on("updateDialogVisible",(function(t){e.dialogVisible=!0,e.dataForm.userid=t.userid,e.dataForm.custname=t.custname,e.dataForm.phoneno=t.phoneno,e.dataForm.username=t.username,e.dataForm.email=t.email,e.dataForm.wechatno=t.wechatno,e.dataForm.password=t.password,e.dataForm.roleid=t.roleid,e.dataForm.userstate=t.userstate,console.log("row",t)}))}},F=h,v=(r("3d47"),Object(d["a"])(F,f,g,!1,null,"83876cb4",null)),y=v.exports,w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",{staticClass:"queryGrid"},[r("el-button",{staticClass:"create-button",attrs:{type:"primary"},on:{click:e.showCreateDialog}},[e._v("新增")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[r("el-table-column",{attrs:{prop:"roleid",label:"角色ID"}}),r("el-table-column",{attrs:{prop:"rolename",label:"角色名称"}}),r("el-table-column",{attrs:{prop:"roledesc",label:"角色描述"}}),r("el-table-column",{attrs:{prop:"rolestate",label:"角色状态"}}),r("el-table-column",{attrs:{fixed:"right",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleUpdate(t.row)}}},[e._v("编辑")]),r("el-button",{attrs:{type:"text",size:"small"},on:{click:function(r){return e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.listCount},on:{"size-change":e.handlePageSizeChange,"current-change":e.handleCurrentPageChange}})],1)},$=[],k={data:function(){return{tableData:[],currentPage:1,pageSize:10,listCount:100}},methods:{getOrderList:function(){var e=this;i["a"].$on("dataList",(function(t){e.tableData=t}))},handleUpdate:function(e){i["a"].$emit("updateDialogVisible",e)},handleDelete:function(e){this.$http.post("/role/deleteRole",{userid:e.userid}),i["a"].$emit("query",!0)},handlePageSizeChange:function(e){this.$store.commit("setPageSize",e),i["a"].$emit("query",!0)},handleCurrentPageChange:function(e){this.$store.commit("setCurrentPage",e),i["a"].$emit("query",!0)},showCreateDialog:function(){i["a"].$emit("createDialogVisible",!0)}},mounted:function(){this.getOrderList()}},q=k,x=(r("f2d5"),Object(d["a"])(q,w,$,!1,null,"1c492ee0",null)),C=x.exports,_=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-card",{staticClass:"queryForm"},[r("el-form",{ref:"queryForm",attrs:{model:e.queryForm,"label-width":"150px"}},[r("el-row",{attrs:{gutter:24}},[r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"角色ID：",prop:"roleid"}},[r("el-input",{model:{value:e.queryForm.roleid,callback:function(t){e.$set(e.queryForm,"roleid",t)},expression:"queryForm.roleid"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"角色名称：",prop:"rolename"}},[r("el-input",{model:{value:e.queryForm.rolename,callback:function(t){e.$set(e.queryForm,"rolename",t)},expression:"queryForm.rolename"}})],1)],1),r("el-col",{attrs:{span:8}},[r("el-form-item",{attrs:{label:"角色状态：",prop:"rolestate"}},[r("tf-select",{attrs:{option:"rolestate"},model:{value:e.queryForm.rolestate,callback:function(t){e.$set(e.queryForm,"rolestate",t)},expression:"queryForm.rolestate"}})],1)],1)],1),r("div",{staticClass:"button-block"},[r("el-button",{staticClass:"button-query",attrs:{type:"primary"},on:{click:function(t){return e.query()}}},[e._v("查询")]),r("el-button",{staticClass:"button-reset",on:{click:function(t){return e.reset()}}},[e._v("重置")])],1)],1)],1)},z=[],R={data:function(){return{queryForm:{roleid:"",rolename:"",roledesc:"",rolestate:"",pageSize:10,currentPage:1}}},methods:{query:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.$loading({lock:!0,text:"loading",background:"rgba(0,0,0,.7)"}),e.queryForm.pageSize=e.$store.state.pageSize,e.queryForm.currentPage=e.$store.state.currentPage,t.next=5,e.$http.post("/role/getRoleList",e.queryForm).then((function(t){r.close(),"10001"===t.data.resposeCode?i["a"].$emit("dataList",t.data.data.list):e.$alert("查询出错，请联系工作人员，微信号：catAshera3","",{confirmButtonText:"确定"})}))["catch"]((function(e){r.close(),console.log(e,"err")}));case 5:a=t.sent,console.log("res1",a);case 7:case"end":return t.stop()}}),t)})))()},reset:function(){this.queryForm={userid:"",username:"",custname:"",phoneno:"",roleid:"",email:"",wechatno:"",userstate:"",pageSize:10,currentPage:1}}},mounted:function(){var e=this;i["a"].$on("query",(function(t){console.log(t),e.query()}))}},V=R,D=(r("a684"),Object(d["a"])(V,_,z,!1,null,"213289d1",null)),O=D.exports,P={components:{CreateForm:p,UpdateForm:y,QueryGrid:C,QueryForm:O},data:function(){return{}},methods:{}},S=P,j=(r("f519"),Object(d["a"])(S,a,o,!1,null,"3982b59c",null));t["default"]=j.exports},f2d5:function(e,t,r){"use strict";var a=r("8da0"),o=r.n(a);o.a},f519:function(e,t,r){"use strict";var a=r("5fc3"),o=r.n(a);o.a}}]);